<div class='container px-5 px-sm-0'>
  <div class='row'>
    <div class='col-md-3'>
      <h2>User info</h2>
      <%= render 'info', user: @user %>
      <h2 class="mt-3">New book</h2>
      <%= render 'books/form', book: @book %>
    </div>

    <div class='col-md-8 offset-md-1'>
    <div class='row'>

      <h2>Books</h2>
      <%= render 'books/index',books: @books %>


       <table class="table table-bordered">
          <h3>7日分の投稿数</h3>
          <thead>
            <tr>
              <th>6日前</th>
              <th>5日前</th>
              <th>4日前</th>
              <th>3日前</th>
              <th>2日前</th>
              <th>昨日</th>
              <th>今日</th>
            </tr>
          </thead>
          <today>
            <tr>
              <td><%= @deys6_ago_book.count %></td>
              <td><%= @deys5_ago_book.count %></td>
              <td><%= @deys4_ago_book.count %></td>
              <td><%= @deys3_ago_book.count %></td>
              <td><%= @deys2_ago_book.count %></td>
              <td><%= @yesterday_book.count %></td>
              <td><%= @today_book.count %></td>
            </tr>
          </today>
        </table>

        <table class="table table-bordered">
          <h3>7日間の投稿数の比較</h3>

            <canvas id="myLineChart"></canvas>
          <script>
              $(document).on('turbolinks:load', function() {
              var ctx = document.getElementById("myLineChart");
              var myLineChart = new Chart(ctx, {
                type: 'line',
                data: {
                  labels: ['6日前', '5日前', '4日前', '3日前', '2日前', '1日前', '今日'],
                  datasets: [
                    {
                      label: '投稿した本の数',
                      data: [<%= @deys6_ago_book.count %>, <%= @deys5_ago_book.count %>, <%= @deys4_ago_book.count %>, <%= @deys3_ago_book.count %>, <%= @deys2_ago_book.count %>, <%= @yesterday_book.count %>, <%= @today_book.count%>],
                      borderColor: "rgba(0,0,255,1)",
                      backgroundColor: "rgba(0,0,0,0)"
                    }
                  ],
                },
                options: {
                  title: {
                    display: true,
                    text: '7日間の投稿数の比較'
                  },
                  scales: {
                    yAxes: [{
                      ticks: {
                        suggestedMax: 10,
                        suggestedMin: 0,
                        stepSize: 1,
                        callback: function(value, index, values){
                          return  value
                        }
                      }
                    }]
                  },
                }
              });
            });
          </script>

    </div>
  </div>
</div>